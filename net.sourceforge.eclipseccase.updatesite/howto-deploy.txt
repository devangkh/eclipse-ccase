
================================================
=      How to make a release of plug-in        =
================================================


Prerequesites
=============

- Eclipse 3.5
- jdk 1.5.0 (check plugin.xml)   
      
##################### Steps ####################

  

1. Make sure all plug-in and feature projects (clearcase,eclipseccase,eclipseccase.feature,eclipseccase.ui) have a new version in  META-INF/MANIFEST.MF.          
  


   
2. Update CHANGELOG.txt in eclipseccase-project.
   New heading stating the new version number.
   Same releasenotes.txt in eclipseccase.feature-project.   


3. 

   Select feature.xml (Overview) under 'Exporting' --> 'Synchronize' --> Copy versions from ...

   Select feature.xml (Overview) under 'Exporting' --> 'Export Wizard'

   "net.sourceforge.eclipseccase.updatesite/full/${feature_id}_${feature_version}.zip"
   (either via File->Export...->Deployable Feature or via feature.xml->Export...)
   Example:

   "net.sourceforge.eclipseccase.updatesite/full/net.sourceforge.eclipseccase_2.2.0.v201002231900.zip
   
 
 Build update site
 =================
 Note:
  Before creating and building an update site project, create a backup of your build.xml file.
  The update-site project build option will erase every build.xml it finds in the features and 
  plugins required by the site which leads to lost work.
  
 1. Select site.xml
    
   - New category if the plugin only supports a new version of Eclipse.
   - Add feature in category.
  
  
   
//FIXME: This has to be updated:
http://www.vogella.de/articles/EclipseP2Update/article.html#introduction   
   
2. build update site
   (right click site.xml->PDE Tools->Build Site)
   
3. check directories for content:
   "net.sourceforge.eclipseccase.updatesite/full/" 
     -> one zip with features and plugins for each feature
   "net.sourceforge.eclipseccase.updatesite/features/" 
     -> one feature jar for each feature
   "net.sourceforge.eclipseccase.updatesite/plugins/" 
     -> one plugin jar for each plugin
     
4. Testing and install plugin from local site. 
   machine if it works, only upload/deploy a release that works.
   Help --> Install New Software --> Add --> 
   Point to the following directory:
   ${workspace}/net.sourceforge.eclipseccase.updatesite
   (it will complain if no site.xml is found).
   Make sure it downloads, installs and uninstalls.
   
   
   Release officially
   ==================
   
   1. This step will deploy plug-in on sourceforge 'file management'-site as well as update site.
      Create a file called "login.properties",same level as
      site-deploy.xml,  with name value parameters;
      user=... ,webuser= ... password=... 
      
      Example:
      user=eraonel
      webuser=eraonel,eclipse-ccase
      password=<password>
       
      Note: webuser is "userid,projectname" as one string. E.g. "eraonel,eclipse-ccase".
    
   	  View 'site-deploy.xml' and make sure that you have correct release of Eclipse to deploy in:
      
      
      Execute 'ant all'
   	
     Check that files have been updated:
   	
   	 https://sourceforge.net/project/admin/explorer.php?group_id=50595
   	 File Manangement --> ecllipse-ccase_Eclipse_3.5 --> 
   	
   	 Note: If you have problems with File Management there is always a fallback to use the GUI on website.
     https://sourceforge.net/project/admin/explorer.php?group_id=50595
      
     For shell based:  sftp eraonel,eclipse-ccase@web.sourceforge.net
   
 2. TAG all projects. First checkin code.
    Use the following tags with current version ( below is just examples):
    CLEARCASE-JAVA_2_1_4_RELEASE (net.sourceforge.clearcase)
    ECLIPSE-CCASE_2_1_4_RELEASE(net.sourceforge.eclipseccase,net.sourceforge.eclipseccase.ui,
    net.sourceforge.eclipseccase.updatesite,net.sourceforge.eclipseccase.feature).
    
    
    Good to do "once in a while"
    ============================
    
    rsync -av eclipse-ccase.git.sourceforge.net::gitroot/eclipse-ccase/* $HOME/backup/eclipse-ccase
    rsync -av clearcase-java.git.sourceforge.net::gitroot/clearcase-java/* $HOME/backup/clearcase-java

   
Make a new release of Plug-in
=============================


Prerequesites:

- Eclipse 3.5
- jdk 1.5.0 (check plugin.xml)   
      
##################### Steps ####################

1. Set version in clearcase project and build.xml

 <property name="project.version" value="net.sourceforge.clearcase_2.2.0.v201002231500"/>
 
 2. Build project manually. Use target  'dist'.     

3. Make sure all plug-in and feature projects (clearcase,eclipseccase,eclipseccase.feature,eclipseccase.ui) have a new version in  META-INF/MANIFEST.MF.          
   Use same as in step 1.


   
4. Update CHANGELOG.txt in eclipseccase-project.
   New heading stating the new version number.
   Same releasenotes.txt in eclipseccase.feature-project.   


5. update version numbers in site.xml ( Use Feature editor).
    
   - New category if the plugin only supports a new version of Eclipse.
   - Add feature in category.

3. build each feature as single, deployable zip (Archive file) into 
   "net.sourceforge.eclipseccase.updatesite/full/${feature_id}_${feature_version}.zip"
   (either via File->Export...->Deployable Feature or via feature.xml->Export...)
   
3.5 Use the manifest editor and build (not build all) only current release.    
   
4. build update site
   (right click site.xml->PDE Tools->Build Site)
   
5. check directories for content:
   "net.sourceforge.eclipseccase.updatesite/full/" 
     -> one zip with features and plugins for each feature
   "net.sourceforge.eclipseccase.updatesite/features/" 
     -> one feature jar for each feature
   "net.sourceforge.eclipseccase.updatesite/plugins/" 
     -> one plugin jar for each plugin
     
6. break: test the build output and update site from within your local 
   machine if it works, only upload/deploy a release that works.
   Help --> Software Updates --> Available Software --> Local
   ${workspace}/net.sourceforge.eclipseccase.updatesite
   (it will complain if no site.xml is found).
   
   Make sure it downloads, installs and uninstalls.
   

7. create "login.properties" file with user=... ,webuser= ... password=... ( name=value) next to site-deploy.xml
   Change in site-deploy.xml to new version.
   Note: webuser is "userid,projectname" as one string. E.g. "eraonel,eclipse-ccase".

8. run site-deploy.xml with ant
   (right click "Run Ant..." with target "all")
   Check that the update site contains the new version. ( Use IE instead of Mozilla).
   
   Within all use the new deploy-zip.
   
   To deploy zip:
   (At the moment the 'deploy-sf-release' target is not working.)
   I used WebDaV, https://frs.sourceforge.net/webupload.
   Prepare info for release on project webpage at sourceforge:
   Admin --> File Releases
   
   For more info check:https://sourceforge.net/apps/trac/sourceforge/wiki/Release%20files%20for%20download
   
   
   For shell based:  sftp eraonel,eclipse-ccase@web.sourceforge.net
   
 9. Don't forget to TAG all projects. Checkin code.
    Use the following tags with current version ( below is just examples):
    CLEARCASE-JAVA_2_1_4_RELEASE
    ECLIPSE-CCASE_2_1_4_RELEASE
